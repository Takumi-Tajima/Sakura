%nav.navbar.navbar-expand-lg.navbar-light.bg-light.border-bottom
  .container
    = link_to root_path, class: 'navbar-brand fw-bold text-primary' do
      %i.bi.bi-flower1.me-2
      さくらマーケット
    
    %button.navbar-toggler{type: 'button', 'data-bs-toggle': 'collapse', 'data-bs-target': '#navbarNav'}
      %span.navbar-toggler-icon
    
    .collapse.navbar-collapse#navbarNav
      %ul.navbar-nav.me-auto
        %li.nav-item
          = link_to '商品一覧', root_path, class: 'nav-link'
      
      %ul.navbar-nav
        - if user_signed_in?
          %li.nav-item
            = link_to cart_path, class: 'nav-link position-relative' do
              %i.bi.bi-cart3
              - if current_user.current_cart.cart_items.any?
                %span.position-absolute.top-0.start-100.translate-middle.badge.rounded-pill.bg-danger
                  = current_user.current_cart.total_quantity
                  %span.visually-hidden 個の商品
          %li.nav-item.dropdown
            %a.nav-link.dropdown-toggle{href: '#', id: 'userDropdown', role: 'button', 'data-bs-toggle': 'dropdown'}
              %i.bi.bi-person-circle.me-1
              = current_user.name
            %ul.dropdown-menu
              %li
                = link_to profile_path, class: 'dropdown-item' do
                  %i.bi.bi-person.me-2
                  プロフィール
              %li
                = link_to orders_path, class: 'dropdown-item' do
                  %i.bi.bi-receipt.me-2
                  注文履歴
              %li
                %hr.dropdown-divider
              %li
                = link_to destroy_user_session_path, method: :delete, class: 'dropdown-item' do
                  %i.bi.bi-box-arrow-right.me-2
                  ログアウト
        - else
          %li.nav-item
            = link_to 'ログイン', new_user_session_path, class: 'nav-link'
          %li.nav-item
            = link_to '新規登録', new_user_registration_path, class: 'nav-link'
